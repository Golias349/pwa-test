<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gr√£o Digital</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0ea05a"/>
  <link rel="icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="styles.css">
  <script>
    // Registra o Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js');
      });
    }
  </script>
  <!-- Chart.js para gr√°ficos do Resumo -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header class="app-header">
    <div class="logo">üå±</div>
    <div class="title">
      <h1>Gr√£o Digital</h1>
      <small id="today"></small>
    </div>
  </header>

  <main id="content">
    <!-- TALH√ïES -->
    <section id="tab-talhoes" class="tab active">
      <div class="card">
        <h2>üåø Talh√µes</h2>
        <div class="row gap">
          <input id="novo-talhao" placeholder="Nome do Talh√£o" />
          <button class="btn" id="add-talhao">Adicionar Talh√£o</button>
        </div>
        <ul id="lista-talhoes" class="list"></ul>
      </div>
    </section>

    <!-- REGISTROS -->
    <section id="tab-registros" class="tab">
      <div class="card">
        <h2>üìù Registros de Aduba√ß√£o</h2>
        <div class="grid">
          <label>Talh√£o
            <select id="reg-talhao"></select>
          </label>
          <label>Insumo (do estoque)
            <select id="reg-insumo"></select>
          </label>
          <label>Qtd aplicada (kg)
            <input id="reg-kg" type="number" min="0" step="0.1" placeholder="Ex: 500">
          </label>
          <label>Descri√ß√£o (opcional)
            <input id="reg-desc" placeholder="Ex: Cobertura...">
          </label>
        </div>
        <div class="hint">O custo usa o pre√ßo do estoque (saco 50kg).</div>
        <button class="btn primary" id="btn-salvar-aplicacao">Salvar aplica√ß√£o</button>

        <h3>√öltimas aplica√ß√µes</h3>
        <table class="table" id="tabela-registros">
          <thead>
            <tr>
              <th>Data</th><th>Talh√£o</th><th>Insumo</th><th>Kg</th><th>Custo (R$)</th><th>Descri√ß√£o</th><th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- ESTOQUE -->
    <section id="tab-estoque" class="tab">
      <div class="card">
        <h2>üì¶ Estoque</h2>
        <div class="grid">
          <label>Nome do insumo
            <input id="stk-nome" placeholder="Ex.: NPK">
          </label>
          <label>Quantidade (kg)
            <input id="stk-kg" type="number" min="0" step="0.1" placeholder="Ex.: 1000">
          </label>
          <label>Pre√ßo por saco (50kg)
            <input id="stk-preco" type="number" min="0" step="0.01" placeholder="Ex.: 120">
          </label>
        </div>
        <button class="btn" id="btn-add-estoque">Adicionar ao Estoque</button>

        <h3>Itens no estoque</h3>
        <table class="table" id="tabela-estoque">
          <thead>
            <tr><th>Insumo</th><th>Qtd (kg)</th><th>Pre√ßo saco (50kg)</th><th>A√ß√µes</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- RESUMO -->
    <section id="tab-resumo" class="tab">
      <div class="card">
        <h2>üìä Resumo Mensal</h2>
        <div class="row gap">
          <label>M√™s
            <select id="filtro-mes"></select>
          </label>
          <label>Ano
            <select id="filtro-ano"></select>
          </label>
          <button class="btn" id="btn-filtrar">Filtrar</button>
          <button class="btn" id="btn-csv">Exportar CSV</button>
          <button class="btn" id="btn-pdf">Exportar PDF</button>
        </div>

        <table class="table" id="tabela-resumo">
          <thead>
            <tr><th>Talh√£o</th><th>Insumo</th><th>Kg aplicados</th><th>Gasto (R$)</th><th>M√™s/Ano</th></tr>
          </thead>
          <tbody></tbody>
        </table>

        <canvas id="grafico-kg" style="width:100%;max-height:360px"></canvas>
        <canvas id="grafico-custo" style="width:100%;max-height:360px"></canvas>
      </div>
    </section>

    <!-- CONFIGURA√á√ïES -->
    <section id="tab-config" class="tab">
      <div class="card">
        <h2>‚öôÔ∏è Configura√ß√µes</h2>
        <h3>Backup (JSON)</h3>
        <div class="row gap">
          <button class="btn" id="btn-exportar-json">Exportar backup (JSON)</button>
          <input type="file" id="input-backup" accept="application/json"/>
          <button class="btn" id="btn-importar-json">Importar backup (JSON)</button>
        </div>

        <h3>Backup no Google Drive (opcional)</h3>
        <div class="row gap">
          <button class="btn" id="btn-google-auth">Conectar ao Google</button>
          <button class="btn" id="btn-google-save">Salvar no Drive</button>
          <button class="btn" id="btn-google-load">Carregar do Drive</button>
        </div>
        <small class="hint">Para ativar, preencha GOOGLE_CLIENT_ID e GOOGLE_API_KEY dentro de <code>app.js</code>.</small>

        <h3 class="danger">LIMPEZA</h3>
        <button class="btn danger" id="btn-apagar-tudo">Apagar TODOS os dados</button>
      </div>
    </section>
  </main>

  <footer class="nav">
    <button class="nav-btn active" data-tab="tab-talhoes">üåø Talh√µes</button>
    <button class="nav-btn" data-tab="tab-registros">üìÑ Registros</button>
    <button class="nav-btn" data-tab="tab-estoque">üì¶ Estoque</button>
    <button class="nav-btn" data-tab="tab-resumo">üìä Resumo</button>
    <button class="nav-btn" data-tab="tab-config">‚öôÔ∏è Configura√ß√µes</button>
  </footer>

  <script src="app.js"></script>
</body>
</html>
